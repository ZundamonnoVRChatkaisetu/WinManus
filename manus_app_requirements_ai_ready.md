
# Manus.im/app 相当のAIエージェントツール要件定義

## 機能要件

### 1. チャット形式のタスク入力と対話
- 自然文での指示入力（例：「技術株を分析してレポートを作成」）
- シンプルなチャットUIを採用
- 複数行テキスト入力、過去メッセージ参照可能
- エージェントはコンテキストを維持しながら動的に計画調整

### 2. AIエージェントの自律タスク実行
- 指示に基づく自動的なタスク分解・プランニング
- Linuxサンドボックス内で以下の操作が可能:
  - シェルコマンド実行（ファイル操作、スクリプト実行、ソフトウェアインストール）
  - ブラウザ操作（情報抽出、フォーム入力、JavaScript実行）
  - ファイルシステム操作（ファイル読み書き、圧縮解凍）
  - アプリ/ウェブサイトのデプロイ（ローカルサーバ起動、一時公開URL）
- エージェントループ(計画→実行→観察→更新)を繰り返し、完了まで処理

### 3. モデル選択機能
- Ollama経由でローカル環境のモデルを自動検出
- UI上でモデル一覧と説明を表示しユーザーが選択可能
- セッション単位でモデル変更可能、実行中タスクには影響なし

### 4. タスク進行状況のリアルタイム表示
- 実行中のコマンドやアクセスサイト等をリアルタイム表示
- 計画したタスク手順リストと状態表示（未着手・処理中・完了）
- エージェントのアクションログを逐次表示
- ユーザーによるエージェント処理の中断や一時停止可能

### 5. ユーザー問い合わせ(Ask)と通知(Notify)対応
- 不明点はユーザーへチャットで質問、回答受信まで一時停止
- 長時間処理中に定期的に進捗を通知（例：「70%完了しました」）

### 6. 結果出力とファイル添付
- 最終結果はチャットでテキストとファイル添付
- ファイル一覧からクリックでダウンロード・プレビュー表示可能
- タスク完了後、追加アクションの提案メッセージを表示

### 7. マルチモーダル入力対応（将来的）
- 画像・音声入力等のマルチモーダル対応が容易な設計

## 非機能要件

### UI設計指針
- 直感的、シンプル、レスポンシブ対応
- チャットアプリ感覚で操作可能
- エージェント・システムメッセージの視覚的識別を明確に

### パフォーマンス要件
- 非同期処理、WebSocketによるリアルタイム通信
- メモリ・CPU使用を制御、UIレスポンスを軽快に維持

### セキュリティ要件
- サンドボックス化された安全な実行環境
- 危険な操作は実行前にユーザーの確認を要求

### ログ管理
- 詳細ログ記録、開発者モードでのログ閲覧機能
- 機微情報をマスクし、安全にログ管理

### 品質要件
- SPA設計、主要ブラウザ・OS対応、多言語化可能
- テスト駆動開発、ユニットテスト完備

## 使用予定技術スタック

### 言語・フレームワーク
- Python（バックエンド）、FastAPI/Flask
- JavaScript/TypeScript（フロントエンド）、React/Vue

### UIコンポーネント
- MUI、Ant Design、Tailwind CSS

### モデル・エージェント環境
- Ollama（ローカルLLM管理）、Playwright（ブラウザ操作）、Docker（コンテナ環境）

### その他
- highlight.js、React Markdown、Git、Docker、CI/CD

## ページ／コンポーネント一覧
- メインチャット画面（履歴・入力欄）
- モデル選択ドロップダウン
- 進行状況表示パネル
- ファイルリスト表示パネル
- 設定モーダル（モデル設定、動作設定）
- エラー通知・トースト表示

## ユーザーフロー
1. アプリ起動・モデル選択
2. タスク入力・送信
3. エージェントプランニングと実行
4. 途中経過通知
5. エージェントからユーザーへの質問（Ask）
6. タスク完了、結果出力
7. 新規タスクまたは終了

## 開発時設計ポイント
- プロンプト最適化、モデル選択UX改善
- サンドボックス環境構築、ツール拡張可能な設計
- クライアント-サーバ分離アーキテクチャ
- モデル応答のセルフチェック機能、品質評価機構の導入
